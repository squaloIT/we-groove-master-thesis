/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["src_js_index_js"],{

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ index)\n/* harmony export */ });\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/api */ \"./src/js/utils/api.js\");\n/* harmony import */ var _utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/dom-manipulation */ \"./src/js/utils/dom-manipulation.js\");\n/* harmony import */ var _utils_image_comment_preview__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/image-comment-preview */ \"./src/js/utils/image-comment-preview.js\");\n/* harmony import */ var _utils_listeners__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/listeners */ \"./src/js/utils/listeners.js\");\n/* harmony import */ var _utils_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/validation */ \"./src/js/utils/validation.js\");\n\n\n\n\n\nfunction index() {\n  var selectedImagesForPost = [];\n  (0,_utils_image_comment_preview__WEBPACK_IMPORTED_MODULE_2__.default)();\n  var taPost = document.querySelector('textarea#post');\n  var emojiButton = document.querySelector('#emoji-button');\n  var submitPostButton = document.querySelector('button#submitPostButton');\n  var uploadImagesInput = document.querySelector('#post-images-for-upload');\n  var uploadPreview = document.querySelector('div.post-insert-wrapper div.textarea-container div.upload-images-preview-wrapper');\n  document.querySelector('button#add-post-image-button').addEventListener('click', function () {\n    uploadImagesInput.click();\n    uploadImagesInput.removeEventListener('change', validateAndPreviewImages);\n    uploadImagesInput.addEventListener('change', validateAndPreviewImages);\n  });\n  document.querySelector(\"div.right_column #topics-users-search\").addEventListener(\"keyup\", (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onSearchTopicsAndUsers)());\n  document.querySelector(\"div.online-users-container div.online-users-header button.open-online-users\").addEventListener(\"click\", function (e) {\n    return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickToggleOnlineUsersWrapper)(e);\n  });\n  document.querySelector(\"div.online-users-container div.online-users-header button.close-online-users\").addEventListener(\"click\", function (e) {\n    return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickToggleOnlineUsersWrapper)(e);\n  });\n\n  if (emojiButton) {\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.defineEmojiTooltip)(emojiButton, document.querySelector('#insert-post-emojis-tooltip'), function (e) {\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.toggleButtonAvailability)(submitPostButton, function () {\n        return taPost.value.trim() == 0 && selectedImagesForPost.length == 0;\n      }, 'bg-opacity-100');\n      (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.addEmojiToInput)(e, taPost);\n    });\n  }\n\n  if (taPost) {\n    taPost.addEventListener('keyup', checkInsertPostTextArea);\n  }\n\n  var taReply = document.querySelector(\"div.reply-aria textarea\");\n  taReply.addEventListener('keyup', function (e) {\n    if (e.target.scrollHeight > 110) {\n      e.target.style.overflowY = 'scroll';\n    } else {\n      e.target.style.overflowY = 'hidden';\n      e.target.style.height = \"\".concat(e.target.scrollHeight);\n    }\n  });\n\n  if (submitPostButton) {\n    submitPostButton.addEventListener('click', function () {\n      var postContentTextbox = document.querySelector('textarea#post');\n      var postContentValue = postContentTextbox.value.trim();\n      var postButtonLabel = document.querySelector('.post-button__label');\n      var postButtonSpinner = document.querySelector('.post-button__spinner');\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.showSpinner)(postButtonLabel, postButtonSpinner);\n\n      if (postContentValue.length > 0 || selectedImagesForPost.length > 0) {\n        postContentTextbox.value = '';\n        var targetElement = document.querySelector('#posts'); // addNewPost(targetElement, res.data.createdPost, \"moments ago\");\n\n        (0,_utils_api__WEBPACK_IMPORTED_MODULE_0__.createPost)(postContentValue, selectedImagesForPost).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          // window.location.reload()\n          (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.addNewPost)(targetElement, res.data.createdPost, \"moments ago\");\n          (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.hideSpinner)(postButtonLabel, postButtonSpinner);\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n        resetImagePreview();\n      } else {\n        (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.hideSpinner)(postButtonLabel, postButtonSpinner);\n      }\n    });\n  }\n\n  (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.setSeparatorHeightForAllReplies)();\n  /**\r\n  * @param {Event} e \r\n  */\n\n  function checkInsertPostTextArea(e) {\n    var postValue = e.target.value;\n    var postBtn = document.querySelector('button#submitPostButton');\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.toggleButtonAvailability)(postBtn, function () {\n      return postValue.trim() == 0 && selectedImagesForPost.length == 0;\n    }, 'bg-opacity-100');\n    postBtn.disabled = postValue.trim().length == 0 && selectedImagesForPost.length == 0;\n  }\n\n  function resetImagePreview() {\n    uploadPreview.innerHTML = '';\n    uploadPreview.classList.add('hidden');\n    selectedImagesForPost = [];\n  }\n\n  function validateAndPreviewImages(e) {\n    if ((0,_utils_validation__WEBPACK_IMPORTED_MODULE_4__.validateNumberOfImages)(e)) {\n      uploadPreview.innerHTML = '';\n      uploadPreview.classList.remove('hidden');\n      selectedImagesForPost = Array.from(e.target.files);\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.addSelectedImagesToPreview)(uploadPreview, e.target.files, function (e, img) {\n        var imageId = img.dataset.imageId;\n        var deletedImage = selectedImagesForPost.find(function (file) {\n          return imageId == \"\".concat(file.lastModified, \"-\").concat(file.name);\n        });\n        selectedImagesForPost = selectedImagesForPost.filter(function (file) {\n          return file != deletedImage;\n        });\n        var imageWrapper = document.querySelector(\".image-wrapper img[data-image-id=\\\"\".concat(deletedImage.lastModified, \"-\").concat(deletedImage.name, \"\\\"]\")).parentElement;\n        imageWrapper.remove();\n\n        if (selectedImagesForPost.length == 0) {\n          uploadPreview.classList.add('hidden');\n        }\n      });\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.toggleButtonAvailability)(submitPostButton, function () {\n        return taPost.value.trim() == 0 && selectedImagesForPost.length == 0;\n      }, 'bg-opacity-100');\n    } else {\n      uploadPreview.classList.add('hidden');\n      selectedImagesForPost = [];\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHAvLi9zcmMvanMvaW5kZXguanM/YWEyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVQb3N0IH0gZnJvbSAnLi91dGlscy9hcGknO1xuaW1wb3J0IHsgYWRkTmV3UG9zdCwgYWRkU2VsZWN0ZWRJbWFnZXNUb1ByZXZpZXcsIGRlZmluZUVtb2ppVG9vbHRpcCwgaGlkZVNwaW5uZXIsIHNldFNlcGFyYXRvckhlaWdodEZvckFsbFJlcGxpZXMsIHNob3dTcGlubmVyLCB0b2dnbGVCdXR0b25BdmFpbGFiaWxpdHkgfSBmcm9tICcuL3V0aWxzL2RvbS1tYW5pcHVsYXRpb24nO1xuaW1wb3J0IGltYWdlQ29tbWVudFByZXZpZXcgZnJvbSAnLi91dGlscy9pbWFnZS1jb21tZW50LXByZXZpZXcnO1xuaW1wb3J0IHsgYWRkRW1vamlUb0lucHV0LCBvbkNsaWNrVG9nZ2xlT25saW5lVXNlcnNXcmFwcGVyLCBvblNlYXJjaFRvcGljc0FuZFVzZXJzIH0gZnJvbSAnLi91dGlscy9saXN0ZW5lcnMnO1xuaW1wb3J0IHsgdmFsaWRhdGVOdW1iZXJPZkltYWdlcyB9IGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbmRleCgpIHtcbiAgdmFyIHNlbGVjdGVkSW1hZ2VzRm9yUG9zdCA9IFtdO1xuICBpbWFnZUNvbW1lbnRQcmV2aWV3KCk7XG4gIHZhciB0YVBvc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYSNwb3N0Jyk7XG4gIHZhciBlbW9qaUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbW9qaS1idXR0b24nKTtcbiAgdmFyIHN1Ym1pdFBvc3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jc3VibWl0UG9zdEJ1dHRvbicpO1xuICB2YXIgdXBsb2FkSW1hZ2VzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9zdC1pbWFnZXMtZm9yLXVwbG9hZCcpO1xuICB2YXIgdXBsb2FkUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wb3N0LWluc2VydC13cmFwcGVyIGRpdi50ZXh0YXJlYS1jb250YWluZXIgZGl2LnVwbG9hZC1pbWFnZXMtcHJldmlldy13cmFwcGVyJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNhZGQtcG9zdC1pbWFnZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB1cGxvYWRJbWFnZXNJbnB1dC5jbGljaygpO1xuICAgIHVwbG9hZEltYWdlc0lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHZhbGlkYXRlQW5kUHJldmlld0ltYWdlcyk7XG4gICAgdXBsb2FkSW1hZ2VzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdmFsaWRhdGVBbmRQcmV2aWV3SW1hZ2VzKTtcbiAgfSk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYucmlnaHRfY29sdW1uICN0b3BpY3MtdXNlcnMtc2VhcmNoXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBvblNlYXJjaFRvcGljc0FuZFVzZXJzKCkpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Lm9ubGluZS11c2Vycy1jb250YWluZXIgZGl2Lm9ubGluZS11c2Vycy1oZWFkZXIgYnV0dG9uLm9wZW4tb25saW5lLXVzZXJzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBvbkNsaWNrVG9nZ2xlT25saW5lVXNlcnNXcmFwcGVyKGUpO1xuICB9KTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5vbmxpbmUtdXNlcnMtY29udGFpbmVyIGRpdi5vbmxpbmUtdXNlcnMtaGVhZGVyIGJ1dHRvbi5jbG9zZS1vbmxpbmUtdXNlcnNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIG9uQ2xpY2tUb2dnbGVPbmxpbmVVc2Vyc1dyYXBwZXIoZSk7XG4gIH0pO1xuXG4gIGlmIChlbW9qaUJ1dHRvbikge1xuICAgIGRlZmluZUVtb2ppVG9vbHRpcChlbW9qaUJ1dHRvbiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc2VydC1wb3N0LWVtb2ppcy10b29sdGlwJyksIGZ1bmN0aW9uIChlKSB7XG4gICAgICB0b2dnbGVCdXR0b25BdmFpbGFiaWxpdHkoc3VibWl0UG9zdEJ1dHRvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGFQb3N0LnZhbHVlLnRyaW0oKSA9PSAwICYmIHNlbGVjdGVkSW1hZ2VzRm9yUG9zdC5sZW5ndGggPT0gMDtcbiAgICAgIH0sICdiZy1vcGFjaXR5LTEwMCcpO1xuICAgICAgYWRkRW1vamlUb0lucHV0KGUsIHRhUG9zdCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAodGFQb3N0KSB7XG4gICAgdGFQb3N0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgY2hlY2tJbnNlcnRQb3N0VGV4dEFyZWEpO1xuICB9XG5cbiAgdmFyIHRhUmVwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LnJlcGx5LWFyaWEgdGV4dGFyZWFcIik7XG4gIHRhUmVwbHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldC5zY3JvbGxIZWlnaHQgPiAxMTApIHtcbiAgICAgIGUudGFyZ2V0LnN0eWxlLm92ZXJmbG93WSA9ICdzY3JvbGwnO1xuICAgIH0gZWxzZSB7XG4gICAgICBlLnRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICAgIGUudGFyZ2V0LnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGUudGFyZ2V0LnNjcm9sbEhlaWdodCk7XG4gICAgfVxuICB9KTtcblxuICBpZiAoc3VibWl0UG9zdEJ1dHRvbikge1xuICAgIHN1Ym1pdFBvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcG9zdENvbnRlbnRUZXh0Ym94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEjcG9zdCcpO1xuICAgICAgdmFyIHBvc3RDb250ZW50VmFsdWUgPSBwb3N0Q29udGVudFRleHRib3gudmFsdWUudHJpbSgpO1xuICAgICAgdmFyIHBvc3RCdXR0b25MYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LWJ1dHRvbl9fbGFiZWwnKTtcbiAgICAgIHZhciBwb3N0QnV0dG9uU3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LWJ1dHRvbl9fc3Bpbm5lcicpO1xuICAgICAgc2hvd1NwaW5uZXIocG9zdEJ1dHRvbkxhYmVsLCBwb3N0QnV0dG9uU3Bpbm5lcik7XG5cbiAgICAgIGlmIChwb3N0Q29udGVudFZhbHVlLmxlbmd0aCA+IDAgfHwgc2VsZWN0ZWRJbWFnZXNGb3JQb3N0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcG9zdENvbnRlbnRUZXh0Ym94LnZhbHVlID0gJyc7XG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bvc3RzJyk7IC8vIGFkZE5ld1Bvc3QodGFyZ2V0RWxlbWVudCwgcmVzLmRhdGEuY3JlYXRlZFBvc3QsIFwibW9tZW50cyBhZ29cIik7XG5cbiAgICAgICAgY3JlYXRlUG9zdChwb3N0Q29udGVudFZhbHVlLCBzZWxlY3RlZEltYWdlc0ZvclBvc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICBhZGROZXdQb3N0KHRhcmdldEVsZW1lbnQsIHJlcy5kYXRhLmNyZWF0ZWRQb3N0LCBcIm1vbWVudHMgYWdvXCIpO1xuICAgICAgICAgIGhpZGVTcGlubmVyKHBvc3RCdXR0b25MYWJlbCwgcG9zdEJ1dHRvblNwaW5uZXIpO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXNldEltYWdlUHJldmlldygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZVNwaW5uZXIocG9zdEJ1dHRvbkxhYmVsLCBwb3N0QnV0dG9uU3Bpbm5lcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzZXRTZXBhcmF0b3JIZWlnaHRGb3JBbGxSZXBsaWVzKCk7XG4gIC8qKlxyXG4gICogQHBhcmFtIHtFdmVudH0gZSBcclxuICAqL1xuXG4gIGZ1bmN0aW9uIGNoZWNrSW5zZXJ0UG9zdFRleHRBcmVhKGUpIHtcbiAgICB2YXIgcG9zdFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgdmFyIHBvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jc3VibWl0UG9zdEJ1dHRvbicpO1xuICAgIHRvZ2dsZUJ1dHRvbkF2YWlsYWJpbGl0eShwb3N0QnRuLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcG9zdFZhbHVlLnRyaW0oKSA9PSAwICYmIHNlbGVjdGVkSW1hZ2VzRm9yUG9zdC5sZW5ndGggPT0gMDtcbiAgICB9LCAnYmctb3BhY2l0eS0xMDAnKTtcbiAgICBwb3N0QnRuLmRpc2FibGVkID0gcG9zdFZhbHVlLnRyaW0oKS5sZW5ndGggPT0gMCAmJiBzZWxlY3RlZEltYWdlc0ZvclBvc3QubGVuZ3RoID09IDA7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldEltYWdlUHJldmlldygpIHtcbiAgICB1cGxvYWRQcmV2aWV3LmlubmVySFRNTCA9ICcnO1xuICAgIHVwbG9hZFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgc2VsZWN0ZWRJbWFnZXNGb3JQb3N0ID0gW107XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZUFuZFByZXZpZXdJbWFnZXMoZSkge1xuICAgIGlmICh2YWxpZGF0ZU51bWJlck9mSW1hZ2VzKGUpKSB7XG4gICAgICB1cGxvYWRQcmV2aWV3LmlubmVySFRNTCA9ICcnO1xuICAgICAgdXBsb2FkUHJldmlldy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIHNlbGVjdGVkSW1hZ2VzRm9yUG9zdCA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMpO1xuICAgICAgYWRkU2VsZWN0ZWRJbWFnZXNUb1ByZXZpZXcodXBsb2FkUHJldmlldywgZS50YXJnZXQuZmlsZXMsIGZ1bmN0aW9uIChlLCBpbWcpIHtcbiAgICAgICAgdmFyIGltYWdlSWQgPSBpbWcuZGF0YXNldC5pbWFnZUlkO1xuICAgICAgICB2YXIgZGVsZXRlZEltYWdlID0gc2VsZWN0ZWRJbWFnZXNGb3JQb3N0LmZpbmQoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gaW1hZ2VJZCA9PSBcIlwiLmNvbmNhdChmaWxlLmxhc3RNb2RpZmllZCwgXCItXCIpLmNvbmNhdChmaWxlLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRJbWFnZXNGb3JQb3N0ID0gc2VsZWN0ZWRJbWFnZXNGb3JQb3N0LmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgIHJldHVybiBmaWxlICE9IGRlbGV0ZWRJbWFnZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBpbWFnZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXdyYXBwZXIgaW1nW2RhdGEtaW1hZ2UtaWQ9XFxcIlwiLmNvbmNhdChkZWxldGVkSW1hZ2UubGFzdE1vZGlmaWVkLCBcIi1cIikuY29uY2F0KGRlbGV0ZWRJbWFnZS5uYW1lLCBcIlxcXCJdXCIpKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpbWFnZVdyYXBwZXIucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSW1hZ2VzRm9yUG9zdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHVwbG9hZFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdG9nZ2xlQnV0dG9uQXZhaWxhYmlsaXR5KHN1Ym1pdFBvc3RCdXR0b24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRhUG9zdC52YWx1ZS50cmltKCkgPT0gMCAmJiBzZWxlY3RlZEltYWdlc0ZvclBvc3QubGVuZ3RoID09IDA7XG4gICAgICB9LCAnYmctb3BhY2l0eS0xMDAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXBsb2FkUHJldmlldy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHNlbGVjdGVkSW1hZ2VzRm9yUG9zdCA9IFtdO1xuICAgIH1cbiAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/index.js\n");

/***/ }),

/***/ "./src/js/utils/image-comment-preview.js":
/*!***********************************************!*\
  !*** ./src/js/utils/image-comment-preview.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ imageCommentPreview)\n/* harmony export */ });\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ \"./src/js/utils/api.js\");\n/* harmony import */ var _dom_manipulation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-manipulation */ \"./src/js/utils/dom-manipulation.js\");\n/* harmony import */ var _listeners__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./listeners */ \"./src/js/utils/listeners.js\");\n/* harmony import */ var _validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validation */ \"./src/js/utils/validation.js\");\n\n\n\n\nfunction imageCommentPreview() {\n  var selectedImagesForComment = [];\n  document.querySelector('div.reply-button-wrapper button.reply-comment-button').addEventListener('click', onClickCommentButton);\n  (0,_listeners__WEBPACK_IMPORTED_MODULE_2__.addAllListenersToPosts)(function (e) {\n    var uploadPreview = document.querySelector('#modal-container div.upload-images-preview-wrapper');\n    var taReply = document.querySelector(\"#modal-container div.reply-aria textarea\");\n    var submitCommentBtn = document.querySelector('div.reply-button-wrapper button.reply-comment-button');\n\n    if ((0,_validation__WEBPACK_IMPORTED_MODULE_3__.validateNumberOfImages)(e)) {\n      uploadPreview.innerHTML = '';\n      uploadPreview.classList.remove('hidden');\n      selectedImagesForComment = Array.from(e.target.files);\n      (0,_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.addSelectedImagesToPreview)(uploadPreview, e.target.files, function (e, img) {\n        var imageId = img.dataset.imageId;\n        var deletedImage = selectedImagesForComment.find(function (file) {\n          return imageId == \"\".concat(file.lastModified, \"-\").concat(file.name);\n        });\n        selectedImagesForComment = selectedImagesForComment.filter(function (file) {\n          return file != deletedImage;\n        });\n        var imageWrapper = document.querySelector(\".image-wrapper img[data-image-id=\\\"\".concat(deletedImage.lastModified, \"-\").concat(deletedImage.name, \"\\\"]\")).parentElement;\n        imageWrapper.remove();\n\n        if (selectedImagesForComment.length == 0) {\n          uploadPreview.classList.add('hidden');\n        }\n      });\n      (0,_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.toggleButtonAvailability)(submitCommentBtn, function () {\n        return taReply.value.trim() == 0 && selectedImagesForComment.length == 0;\n      }, 'bg-opacity-100');\n    } else {\n      uploadPreview.classList.add('hidden');\n      selectedImagesForComment = [];\n    }\n  });\n  /**\r\n   * @param {Event} e \r\n   */\n\n  function onClickCommentButton(e) {\n    e.stopPropagation();\n    var pid = e.target.dataset.pid;\n    var content = document.querySelector(\"div#modal-container div.reply-aria textarea\").value;\n    var commentButtonLabel = document.querySelector('div#modal-container div.reply-button-wrapper span.comment-button__label');\n    var commentButtonSpinner = document.querySelector('div#modal-container div.reply-button-wrapper .comment-button__spinner');\n    (0,_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.showSpinner)(commentButtonLabel, commentButtonSpinner);\n    var modal = document.querySelector('#modal-container');\n    (0,_api__WEBPACK_IMPORTED_MODULE_0__.replyToPost)(pid, content, selectedImagesForComment).then(function (res) {\n      return res.json();\n    }).then(function (_ref) {\n      var status = _ref.status;\n\n      if (status == 201) {\n        (0,_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.hideSpinner)(commentButtonLabel, commentButtonSpinner);\n        location.reload();\n      }\n\n      modal.classList.add('hidden');\n    })[\"catch\"](function (err) {\n      (0,_dom_manipulation__WEBPACK_IMPORTED_MODULE_1__.hideSpinner)(commentButtonLabel, commentButtonSpinner);\n      console.error(err);\n      modal.classList.add('hidden');\n    });\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvdXRpbHMvaW1hZ2UtY29tbWVudC1wcmV2aWV3LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2pzL3V0aWxzL2ltYWdlLWNvbW1lbnQtcHJldmlldy5qcz8wZjIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlcGx5VG9Qb3N0IH0gZnJvbSBcIi4vYXBpXCI7XG5pbXBvcnQgeyBhZGRTZWxlY3RlZEltYWdlc1RvUHJldmlldywgaGlkZVNwaW5uZXIsIHNob3dTcGlubmVyLCB0b2dnbGVCdXR0b25BdmFpbGFiaWxpdHkgfSBmcm9tIFwiLi9kb20tbWFuaXB1bGF0aW9uXCI7XG5pbXBvcnQgeyBhZGRBbGxMaXN0ZW5lcnNUb1Bvc3RzIH0gZnJvbSBcIi4vbGlzdGVuZXJzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZU51bWJlck9mSW1hZ2VzIH0gZnJvbSBcIi4vdmFsaWRhdGlvblwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1hZ2VDb21tZW50UHJldmlldygpIHtcbiAgdmFyIHNlbGVjdGVkSW1hZ2VzRm9yQ29tbWVudCA9IFtdO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucmVwbHktYnV0dG9uLXdyYXBwZXIgYnV0dG9uLnJlcGx5LWNvbW1lbnQtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ29tbWVudEJ1dHRvbik7XG4gIGFkZEFsbExpc3RlbmVyc1RvUG9zdHMoZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdXBsb2FkUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1jb250YWluZXIgZGl2LnVwbG9hZC1pbWFnZXMtcHJldmlldy13cmFwcGVyJyk7XG4gICAgdmFyIHRhUmVwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWNvbnRhaW5lciBkaXYucmVwbHktYXJpYSB0ZXh0YXJlYVwiKTtcbiAgICB2YXIgc3VibWl0Q29tbWVudEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5yZXBseS1idXR0b24td3JhcHBlciBidXR0b24ucmVwbHktY29tbWVudC1idXR0b24nKTtcblxuICAgIGlmICh2YWxpZGF0ZU51bWJlck9mSW1hZ2VzKGUpKSB7XG4gICAgICB1cGxvYWRQcmV2aWV3LmlubmVySFRNTCA9ICcnO1xuICAgICAgdXBsb2FkUHJldmlldy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIHNlbGVjdGVkSW1hZ2VzRm9yQ29tbWVudCA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMpO1xuICAgICAgYWRkU2VsZWN0ZWRJbWFnZXNUb1ByZXZpZXcodXBsb2FkUHJldmlldywgZS50YXJnZXQuZmlsZXMsIGZ1bmN0aW9uIChlLCBpbWcpIHtcbiAgICAgICAgdmFyIGltYWdlSWQgPSBpbWcuZGF0YXNldC5pbWFnZUlkO1xuICAgICAgICB2YXIgZGVsZXRlZEltYWdlID0gc2VsZWN0ZWRJbWFnZXNGb3JDb21tZW50LmZpbmQoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gaW1hZ2VJZCA9PSBcIlwiLmNvbmNhdChmaWxlLmxhc3RNb2RpZmllZCwgXCItXCIpLmNvbmNhdChmaWxlLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRJbWFnZXNGb3JDb21tZW50ID0gc2VsZWN0ZWRJbWFnZXNGb3JDb21tZW50LmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgIHJldHVybiBmaWxlICE9IGRlbGV0ZWRJbWFnZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBpbWFnZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXdyYXBwZXIgaW1nW2RhdGEtaW1hZ2UtaWQ9XFxcIlwiLmNvbmNhdChkZWxldGVkSW1hZ2UubGFzdE1vZGlmaWVkLCBcIi1cIikuY29uY2F0KGRlbGV0ZWRJbWFnZS5uYW1lLCBcIlxcXCJdXCIpKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpbWFnZVdyYXBwZXIucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSW1hZ2VzRm9yQ29tbWVudC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHVwbG9hZFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdG9nZ2xlQnV0dG9uQXZhaWxhYmlsaXR5KHN1Ym1pdENvbW1lbnRCdG4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRhUmVwbHkudmFsdWUudHJpbSgpID09IDAgJiYgc2VsZWN0ZWRJbWFnZXNGb3JDb21tZW50Lmxlbmd0aCA9PSAwO1xuICAgICAgfSwgJ2JnLW9wYWNpdHktMTAwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwbG9hZFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBzZWxlY3RlZEltYWdlc0ZvckNvbW1lbnQgPSBbXTtcbiAgICB9XG4gIH0pO1xuICAvKipcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIFxyXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQ2xpY2tDb21tZW50QnV0dG9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHZhciBwaWQgPSBlLnRhcmdldC5kYXRhc2V0LnBpZDtcbiAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYjbW9kYWwtY29udGFpbmVyIGRpdi5yZXBseS1hcmlhIHRleHRhcmVhXCIpLnZhbHVlO1xuICAgIHZhciBjb21tZW50QnV0dG9uTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYjbW9kYWwtY29udGFpbmVyIGRpdi5yZXBseS1idXR0b24td3JhcHBlciBzcGFuLmNvbW1lbnQtYnV0dG9uX19sYWJlbCcpO1xuICAgIHZhciBjb21tZW50QnV0dG9uU3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNtb2RhbC1jb250YWluZXIgZGl2LnJlcGx5LWJ1dHRvbi13cmFwcGVyIC5jb21tZW50LWJ1dHRvbl9fc3Bpbm5lcicpO1xuICAgIHNob3dTcGlubmVyKGNvbW1lbnRCdXR0b25MYWJlbCwgY29tbWVudEJ1dHRvblNwaW5uZXIpO1xuICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1jb250YWluZXInKTtcbiAgICByZXBseVRvUG9zdChwaWQsIGNvbnRlbnQsIHNlbGVjdGVkSW1hZ2VzRm9yQ29tbWVudCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICB2YXIgc3RhdHVzID0gX3JlZi5zdGF0dXM7XG5cbiAgICAgIGlmIChzdGF0dXMgPT0gMjAxKSB7XG4gICAgICAgIGhpZGVTcGlubmVyKGNvbW1lbnRCdXR0b25MYWJlbCwgY29tbWVudEJ1dHRvblNwaW5uZXIpO1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBoaWRlU3Bpbm5lcihjb21tZW50QnV0dG9uTGFiZWwsIGNvbW1lbnRCdXR0b25TcGlubmVyKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH0pO1xuICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/utils/image-comment-preview.js\n");

/***/ })

}]);