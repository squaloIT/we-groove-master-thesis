"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwegroove"] = self["webpackChunkwegroove"] || []).push([["app_js_inbox_js"],{

/***/ "./app/js/inbox.js":
/*!*************************!*\
  !*** ./app/js/inbox.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ inbox)\n/* harmony export */ });\n/* harmony import */ var _client_socket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client-socket */ \"./app/js/client-socket.js\");\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/api */ \"./app/js/utils/api.js\");\n/* harmony import */ var _utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/dom-manipulation */ \"./app/js/utils/dom-manipulation.js\");\n/* harmony import */ var _utils_listeners__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/listeners */ \"./app/js/utils/listeners.js\");\n/* harmony import */ var _utils_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/validation */ \"./app/js/utils/validation.js\");\n\n\n\n\n\nfunction inbox() {\n  var timer = null;\n  var selectedImages = [];\n  var selectedUsers = [];\n  var contentWrapper = document.querySelector('div#inbox div.content-wrapper');\n  var searchInput = document.querySelector('input#search-user');\n  var createChatButton = document.querySelector('button#createChatButton');\n  var chatNameHeader = document.querySelector('div#inbox div.header-chat-name');\n  var chatMessageInput = document.querySelector('div#inbox textarea.chat-message-ta');\n  var emojiButton = document.querySelector('#emoji-button');\n  var sendMessageButton = document.querySelector('#send-message-button');\n  var chatMessagesContainer = document.querySelector('#inbox div.chat-messages-container');\n  var urlParts = window.location.pathname.split('/');\n  var chatId = urlParts[urlParts.length - 1];\n  document.querySelector(\"div.right_column #topics-users-search\").addEventListener(\"keyup\", (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onSearchTopicsAndUsers)());\n  document.querySelector(\"div.online-users-container div.online-users-header button.open-online-users\").addEventListener(\"click\", function (e) {\n    return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickToggleOnlineUsersWrapper)(e);\n  });\n  document.querySelector(\"div.online-users-container div.online-users-header button.close-online-users\").addEventListener(\"click\", function (e) {\n    return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickToggleOnlineUsersWrapper)(e);\n  });\n\n  if (chatMessagesContainer) {\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.scrollMessagesToBottom)(chatMessagesContainer);\n  }\n\n  if (sendMessageButton) {\n    var inputFileImages = document.querySelector('#message-images-for-upload');\n    var uploadPreview = document.querySelector('#inbox > div.chat-messages-wrapper div.upload-images-preview-wrapper');\n    (0,_client_socket__WEBPACK_IMPORTED_MODULE_0__.emitJoinRoom)(chatId);\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.disableButton)(sendMessageButton, 'hover:bg-comment-button-blue-background');\n    sendMessageButton.addEventListener('click', function (e) {\n      (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onSendMessage)(e, chatMessageInput, chatMessagesContainer, selectedImages).then(clearImagePreview);\n    });\n    chatMessageInput.addEventListener('keyup', function (e) {\n      (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.updateTyping)(chatId);\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.toggleButtonAvailability)(sendMessageButton, function () {\n        return e.target.value.trim() == 0 && selectedImages.length == 0;\n      }, 'hover:bg-comment-button-blue-background');\n\n      if (e.keyCode == 13 || e.which == 13) {\n        (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onSendMessage)(e, e.target, chatMessagesContainer, selectedImages).then(clearImagePreview); // scrollMessagesToBottom(chatMessagesContainer)\n      }\n    });\n    document.querySelector('#inbox button.message-image-button').addEventListener('click', function () {\n      inputFileImages.click();\n      inputFileImages.removeEventListener('change', validateAndPreviewImages);\n      inputFileImages.addEventListener('change', validateAndPreviewImages);\n    });\n  }\n\n  if (emojiButton) {\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.defineEmojiTooltip)(emojiButton, document.querySelector('#chat-emojis-tooltip'), function (e) {\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.toggleButtonAvailability)(sendMessageButton, function () {\n        return chatMessageInput.value.trim() == 0 && selectedImages.length == 0;\n      }, 'hover:bg-comment-button-blue-background');\n      (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.updateTyping)(chatId);\n      (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.addEmojiToInput)(e, chatMessageInput);\n    });\n  }\n\n  if (chatNameHeader) {\n    chatNameHeader.addEventListener('click', function (e) {\n      var chatId = e.target.dataset.chatId;\n      var currentChatName = chatNameHeader.innerText;\n      var modal = document.querySelector('#modal-container');\n      modal.classList.remove('hidden');\n      var chatName = modal.querySelector('input#chat-name');\n      chatName.setAttribute('value', currentChatName);\n      var saveButton = modal.querySelector('.save-modal-button');\n      saveButton.addEventListener('click', function (e) {\n        return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickSaveChatNameButton)(e, modal, chatId);\n      });\n\n      if (chatName.value.trim().length == 0) {\n        (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.disableButton)(saveButton, 'hover:bg-comment-button-blue');\n      }\n\n      var closebutton = modal.querySelector('.close-modal-button');\n      closebutton.addEventListener('click', function () {\n        modal.classList.add('hidden');\n        chatName.value = '';\n      });\n      var cancelButton = modal.querySelector('.cancel-modal-button');\n      cancelButton.addEventListener('click', function () {\n        modal.classList.add('hidden');\n        chatName.value = '';\n      });\n      chatName.addEventListener('keyup', function (e) {\n        (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.toggleButtonAvailability)(saveButton, function () {\n          return chatName.value.trim().length == 0;\n        });\n      });\n    });\n  }\n\n  if (searchInput) {\n    searchInput.addEventListener('keyup', function (e) {\n      clearTimeout(timer);\n      var value = e.target.value.trim(); //* This means that users wants to delete some of the users that are already selected\n\n      if (value == '' && e.keyCode == 8) {\n        deleteUserFromSelectedUsers(selectedUsers, createChatButton, contentWrapper);\n      }\n\n      timer = setTimeout(function () {\n        contentWrapper.innerHTML = \"\";\n\n        if (value != '' && value.length > 2) {\n          (0,_utils_api__WEBPACK_IMPORTED_MODULE_1__.searchUsers)(value).then(function (_ref) {\n            var data = _ref.data,\n                status = _ref.status,\n                msg = _ref.msg;\n\n            if (status == 200) {\n              data.forEach(function (user) {\n                if (selectedUsers.some(function (u) {\n                  return u._id == user._id;\n                })) {\n                  console.log(\"ALREADY SELECTED\");\n                  return;\n                }\n\n                (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.createRowAndAddListener)(user, selectedUsers, searchInput, contentWrapper);\n              });\n            }\n          })[\"catch\"](function (err) {\n            console.error(err);\n          });\n        }\n      }, 1000);\n    });\n  }\n\n  createChatButton && createChatButton.addEventListener('click', function (e) {\n    return (0,_utils_listeners__WEBPACK_IMPORTED_MODULE_3__.onClickCreateChat)(e, selectedUsers);\n  });\n\n  function deleteUserFromSelectedUsers(selectedUsers, createChatButton, contentWrapper) {\n    selectedUsers.pop();\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.toggleButtonAvailability)(createChatButton, function () {\n      return selectedUsers.length == 0;\n    });\n    (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.displaySelectedUsers)(selectedUsers);\n    contentWrapper.innerHTML = '';\n  }\n\n  function clearImagePreview() {\n    uploadPreview.innerHTML = '';\n    uploadPreview.classList.add('hidden');\n    selectedImages = [];\n  }\n\n  ;\n\n  function validateAndPreviewImages(e) {\n    if ((0,_utils_validation__WEBPACK_IMPORTED_MODULE_4__.validateNumberOfImages)(e)) {\n      uploadPreview.innerHTML = '';\n      uploadPreview.classList.remove('hidden');\n      selectedImages = Array.from(e.target.files);\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.addSelectedImagesToPreview)(uploadPreview, e.target.files, function (e, img) {\n        var imageId = img.dataset.imageId;\n        var deletedImage = selectedImages.find(function (file) {\n          return imageId == \"\".concat(file.lastModified, \"-\").concat(file.name);\n        });\n        selectedImages = selectedImages.filter(function (file) {\n          return file != deletedImage;\n        });\n        var imageWrapper = document.querySelector(\".image-wrapper img[data-image-id=\\\"\".concat(deletedImage.lastModified, \"-\").concat(deletedImage.name, \"\\\"]\")).parentElement;\n        imageWrapper.remove();\n\n        if (selectedImages.length == 0) {\n          uploadPreview.classList.add('hidden');\n        }\n      });\n      (0,_utils_dom_manipulation__WEBPACK_IMPORTED_MODULE_2__.toggleButtonAvailability)(sendMessageButton, function () {\n        return chatMessageInput.value.trim() == 0 && selectedImages.length == 0;\n      }, 'hover:bg-comment-button-blue-background');\n    } else {\n      uploadPreview.classList.add('hidden');\n      selectedImages = [];\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvanMvaW5ib3guanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Vncm9vdmUvLi9hcHAvanMvaW5ib3guanM/NTZmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbWl0Sm9pblJvb20gfSBmcm9tICcuL2NsaWVudC1zb2NrZXQnO1xuaW1wb3J0IHsgc2VhcmNoVXNlcnMgfSBmcm9tIFwiLi91dGlscy9hcGlcIjtcbmltcG9ydCB7IGFkZFNlbGVjdGVkSW1hZ2VzVG9QcmV2aWV3LCBjcmVhdGVSb3dBbmRBZGRMaXN0ZW5lciwgZGVmaW5lRW1vamlUb29sdGlwLCBkaXNhYmxlQnV0dG9uLCBkaXNwbGF5U2VsZWN0ZWRVc2Vycywgc2Nyb2xsTWVzc2FnZXNUb0JvdHRvbSwgdG9nZ2xlQnV0dG9uQXZhaWxhYmlsaXR5IH0gZnJvbSBcIi4vdXRpbHMvZG9tLW1hbmlwdWxhdGlvblwiO1xuaW1wb3J0IHsgYWRkRW1vamlUb0lucHV0LCBvbkNsaWNrQ3JlYXRlQ2hhdCwgb25DbGlja1NhdmVDaGF0TmFtZUJ1dHRvbiwgb25DbGlja1RvZ2dsZU9ubGluZVVzZXJzV3JhcHBlciwgb25TZWFyY2hUb3BpY3NBbmRVc2Vycywgb25TZW5kTWVzc2FnZSwgdXBkYXRlVHlwaW5nIH0gZnJvbSBcIi4vdXRpbHMvbGlzdGVuZXJzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZU51bWJlck9mSW1hZ2VzIH0gZnJvbSBcIi4vdXRpbHMvdmFsaWRhdGlvblwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5ib3goKSB7XG4gIHZhciB0aW1lciA9IG51bGw7XG4gIHZhciBzZWxlY3RlZEltYWdlcyA9IFtdO1xuICB2YXIgc2VsZWN0ZWRVc2VycyA9IFtdO1xuICB2YXIgY29udGVudFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYjaW5ib3ggZGl2LmNvbnRlbnQtd3JhcHBlcicpO1xuICB2YXIgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCNzZWFyY2gtdXNlcicpO1xuICB2YXIgY3JlYXRlQ2hhdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNjcmVhdGVDaGF0QnV0dG9uJyk7XG4gIHZhciBjaGF0TmFtZUhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNpbmJveCBkaXYuaGVhZGVyLWNoYXQtbmFtZScpO1xuICB2YXIgY2hhdE1lc3NhZ2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNpbmJveCB0ZXh0YXJlYS5jaGF0LW1lc3NhZ2UtdGEnKTtcbiAgdmFyIGVtb2ppQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Vtb2ppLWJ1dHRvbicpO1xuICB2YXIgc2VuZE1lc3NhZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VuZC1tZXNzYWdlLWJ1dHRvbicpO1xuICB2YXIgY2hhdE1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luYm94IGRpdi5jaGF0LW1lc3NhZ2VzLWNvbnRhaW5lcicpO1xuICB2YXIgdXJsUGFydHMgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgdmFyIGNoYXRJZCA9IHVybFBhcnRzW3VybFBhcnRzLmxlbmd0aCAtIDFdO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LnJpZ2h0X2NvbHVtbiAjdG9waWNzLXVzZXJzLXNlYXJjaFwiKS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgb25TZWFyY2hUb3BpY3NBbmRVc2VycygpKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5vbmxpbmUtdXNlcnMtY29udGFpbmVyIGRpdi5vbmxpbmUtdXNlcnMtaGVhZGVyIGJ1dHRvbi5vcGVuLW9ubGluZS11c2Vyc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gb25DbGlja1RvZ2dsZU9ubGluZVVzZXJzV3JhcHBlcihlKTtcbiAgfSk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub25saW5lLXVzZXJzLWNvbnRhaW5lciBkaXYub25saW5lLXVzZXJzLWhlYWRlciBidXR0b24uY2xvc2Utb25saW5lLXVzZXJzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBvbkNsaWNrVG9nZ2xlT25saW5lVXNlcnNXcmFwcGVyKGUpO1xuICB9KTtcblxuICBpZiAoY2hhdE1lc3NhZ2VzQ29udGFpbmVyKSB7XG4gICAgc2Nyb2xsTWVzc2FnZXNUb0JvdHRvbShjaGF0TWVzc2FnZXNDb250YWluZXIpO1xuICB9XG5cbiAgaWYgKHNlbmRNZXNzYWdlQnV0dG9uKSB7XG4gICAgdmFyIGlucHV0RmlsZUltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlLWltYWdlcy1mb3ItdXBsb2FkJyk7XG4gICAgdmFyIHVwbG9hZFByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5ib3ggPiBkaXYuY2hhdC1tZXNzYWdlcy13cmFwcGVyIGRpdi51cGxvYWQtaW1hZ2VzLXByZXZpZXctd3JhcHBlcicpO1xuICAgIGVtaXRKb2luUm9vbShjaGF0SWQpO1xuICAgIGRpc2FibGVCdXR0b24oc2VuZE1lc3NhZ2VCdXR0b24sICdob3ZlcjpiZy1jb21tZW50LWJ1dHRvbi1ibHVlLWJhY2tncm91bmQnKTtcbiAgICBzZW5kTWVzc2FnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBvblNlbmRNZXNzYWdlKGUsIGNoYXRNZXNzYWdlSW5wdXQsIGNoYXRNZXNzYWdlc0NvbnRhaW5lciwgc2VsZWN0ZWRJbWFnZXMpLnRoZW4oY2xlYXJJbWFnZVByZXZpZXcpO1xuICAgIH0pO1xuICAgIGNoYXRNZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdXBkYXRlVHlwaW5nKGNoYXRJZCk7XG4gICAgICB0b2dnbGVCdXR0b25BdmFpbGFiaWxpdHkoc2VuZE1lc3NhZ2VCdXR0b24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGUudGFyZ2V0LnZhbHVlLnRyaW0oKSA9PSAwICYmIHNlbGVjdGVkSW1hZ2VzLmxlbmd0aCA9PSAwO1xuICAgICAgfSwgJ2hvdmVyOmJnLWNvbW1lbnQtYnV0dG9uLWJsdWUtYmFja2dyb3VuZCcpO1xuXG4gICAgICBpZiAoZS5rZXlDb2RlID09IDEzIHx8IGUud2hpY2ggPT0gMTMpIHtcbiAgICAgICAgb25TZW5kTWVzc2FnZShlLCBlLnRhcmdldCwgY2hhdE1lc3NhZ2VzQ29udGFpbmVyLCBzZWxlY3RlZEltYWdlcykudGhlbihjbGVhckltYWdlUHJldmlldyk7IC8vIHNjcm9sbE1lc3NhZ2VzVG9Cb3R0b20oY2hhdE1lc3NhZ2VzQ29udGFpbmVyKVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbmJveCBidXR0b24ubWVzc2FnZS1pbWFnZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlucHV0RmlsZUltYWdlcy5jbGljaygpO1xuICAgICAgaW5wdXRGaWxlSW1hZ2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHZhbGlkYXRlQW5kUHJldmlld0ltYWdlcyk7XG4gICAgICBpbnB1dEZpbGVJbWFnZXMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdmFsaWRhdGVBbmRQcmV2aWV3SW1hZ2VzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChlbW9qaUJ1dHRvbikge1xuICAgIGRlZmluZUVtb2ppVG9vbHRpcChlbW9qaUJ1dHRvbiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXQtZW1vamlzLXRvb2x0aXAnKSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRvZ2dsZUJ1dHRvbkF2YWlsYWJpbGl0eShzZW5kTWVzc2FnZUJ1dHRvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2hhdE1lc3NhZ2VJbnB1dC52YWx1ZS50cmltKCkgPT0gMCAmJiBzZWxlY3RlZEltYWdlcy5sZW5ndGggPT0gMDtcbiAgICAgIH0sICdob3ZlcjpiZy1jb21tZW50LWJ1dHRvbi1ibHVlLWJhY2tncm91bmQnKTtcbiAgICAgIHVwZGF0ZVR5cGluZyhjaGF0SWQpO1xuICAgICAgYWRkRW1vamlUb0lucHV0KGUsIGNoYXRNZXNzYWdlSW5wdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGNoYXROYW1lSGVhZGVyKSB7XG4gICAgY2hhdE5hbWVIZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGNoYXRJZCA9IGUudGFyZ2V0LmRhdGFzZXQuY2hhdElkO1xuICAgICAgdmFyIGN1cnJlbnRDaGF0TmFtZSA9IGNoYXROYW1lSGVhZGVyLmlubmVyVGV4dDtcbiAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1jb250YWluZXInKTtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgdmFyIGNoYXROYW1lID0gbW9kYWwucXVlcnlTZWxlY3RvcignaW5wdXQjY2hhdC1uYW1lJyk7XG4gICAgICBjaGF0TmFtZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgY3VycmVudENoYXROYW1lKTtcbiAgICAgIHZhciBzYXZlQnV0dG9uID0gbW9kYWwucXVlcnlTZWxlY3RvcignLnNhdmUtbW9kYWwtYnV0dG9uJyk7XG4gICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIG9uQ2xpY2tTYXZlQ2hhdE5hbWVCdXR0b24oZSwgbW9kYWwsIGNoYXRJZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGNoYXROYW1lLnZhbHVlLnRyaW0oKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBkaXNhYmxlQnV0dG9uKHNhdmVCdXR0b24sICdob3ZlcjpiZy1jb21tZW50LWJ1dHRvbi1ibHVlJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9zZWJ1dHRvbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1tb2RhbC1idXR0b24nKTtcbiAgICAgIGNsb3NlYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgY2hhdE5hbWUudmFsdWUgPSAnJztcbiAgICAgIH0pO1xuICAgICAgdmFyIGNhbmNlbEJ1dHRvbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtbW9kYWwtYnV0dG9uJyk7XG4gICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBjaGF0TmFtZS52YWx1ZSA9ICcnO1xuICAgICAgfSk7XG4gICAgICBjaGF0TmFtZS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRvZ2dsZUJ1dHRvbkF2YWlsYWJpbGl0eShzYXZlQnV0dG9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNoYXROYW1lLnZhbHVlLnRyaW0oKS5sZW5ndGggPT0gMDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChzZWFyY2hJbnB1dCkge1xuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC52YWx1ZS50cmltKCk7IC8vKiBUaGlzIG1lYW5zIHRoYXQgdXNlcnMgd2FudHMgdG8gZGVsZXRlIHNvbWUgb2YgdGhlIHVzZXJzIHRoYXQgYXJlIGFscmVhZHkgc2VsZWN0ZWRcblxuICAgICAgaWYgKHZhbHVlID09ICcnICYmIGUua2V5Q29kZSA9PSA4KSB7XG4gICAgICAgIGRlbGV0ZVVzZXJGcm9tU2VsZWN0ZWRVc2VycyhzZWxlY3RlZFVzZXJzLCBjcmVhdGVDaGF0QnV0dG9uLCBjb250ZW50V3JhcHBlcik7XG4gICAgICB9XG5cbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRlbnRXcmFwcGVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgICAgaWYgKHZhbHVlICE9ICcnICYmIHZhbHVlLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICBzZWFyY2hVc2Vycyh2YWx1ZSkudGhlbihmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGEsXG4gICAgICAgICAgICAgICAgc3RhdHVzID0gX3JlZi5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbXNnID0gX3JlZi5tc2c7XG5cbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFVzZXJzLnNvbWUoZnVuY3Rpb24gKHUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB1Ll9pZCA9PSB1c2VyLl9pZDtcbiAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBTFJFQURZIFNFTEVDVEVEXCIpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNyZWF0ZVJvd0FuZEFkZExpc3RlbmVyKHVzZXIsIHNlbGVjdGVkVXNlcnMsIHNlYXJjaElucHV0LCBjb250ZW50V3JhcHBlcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNoYXRCdXR0b24gJiYgY3JlYXRlQ2hhdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIG9uQ2xpY2tDcmVhdGVDaGF0KGUsIHNlbGVjdGVkVXNlcnMpO1xuICB9KTtcblxuICBmdW5jdGlvbiBkZWxldGVVc2VyRnJvbVNlbGVjdGVkVXNlcnMoc2VsZWN0ZWRVc2VycywgY3JlYXRlQ2hhdEJ1dHRvbiwgY29udGVudFdyYXBwZXIpIHtcbiAgICBzZWxlY3RlZFVzZXJzLnBvcCgpO1xuICAgIHRvZ2dsZUJ1dHRvbkF2YWlsYWJpbGl0eShjcmVhdGVDaGF0QnV0dG9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2VsZWN0ZWRVc2Vycy5sZW5ndGggPT0gMDtcbiAgICB9KTtcbiAgICBkaXNwbGF5U2VsZWN0ZWRVc2VycyhzZWxlY3RlZFVzZXJzKTtcbiAgICBjb250ZW50V3JhcHBlci5pbm5lckhUTUwgPSAnJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFySW1hZ2VQcmV2aWV3KCkge1xuICAgIHVwbG9hZFByZXZpZXcuaW5uZXJIVE1MID0gJyc7XG4gICAgdXBsb2FkUHJldmlldy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBzZWxlY3RlZEltYWdlcyA9IFtdO1xuICB9XG5cbiAgO1xuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQW5kUHJldmlld0ltYWdlcyhlKSB7XG4gICAgaWYgKHZhbGlkYXRlTnVtYmVyT2ZJbWFnZXMoZSkpIHtcbiAgICAgIHVwbG9hZFByZXZpZXcuaW5uZXJIVE1MID0gJyc7XG4gICAgICB1cGxvYWRQcmV2aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgc2VsZWN0ZWRJbWFnZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzKTtcbiAgICAgIGFkZFNlbGVjdGVkSW1hZ2VzVG9QcmV2aWV3KHVwbG9hZFByZXZpZXcsIGUudGFyZ2V0LmZpbGVzLCBmdW5jdGlvbiAoZSwgaW1nKSB7XG4gICAgICAgIHZhciBpbWFnZUlkID0gaW1nLmRhdGFzZXQuaW1hZ2VJZDtcbiAgICAgICAgdmFyIGRlbGV0ZWRJbWFnZSA9IHNlbGVjdGVkSW1hZ2VzLmZpbmQoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gaW1hZ2VJZCA9PSBcIlwiLmNvbmNhdChmaWxlLmxhc3RNb2RpZmllZCwgXCItXCIpLmNvbmNhdChmaWxlLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRJbWFnZXMgPSBzZWxlY3RlZEltYWdlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gZmlsZSAhPSBkZWxldGVkSW1hZ2U7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaW1hZ2VXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS13cmFwcGVyIGltZ1tkYXRhLWltYWdlLWlkPVxcXCJcIi5jb25jYXQoZGVsZXRlZEltYWdlLmxhc3RNb2RpZmllZCwgXCItXCIpLmNvbmNhdChkZWxldGVkSW1hZ2UubmFtZSwgXCJcXFwiXVwiKSkucGFyZW50RWxlbWVudDtcbiAgICAgICAgaW1hZ2VXcmFwcGVyLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZEltYWdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHVwbG9hZFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdG9nZ2xlQnV0dG9uQXZhaWxhYmlsaXR5KHNlbmRNZXNzYWdlQnV0dG9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjaGF0TWVzc2FnZUlucHV0LnZhbHVlLnRyaW0oKSA9PSAwICYmIHNlbGVjdGVkSW1hZ2VzLmxlbmd0aCA9PSAwO1xuICAgICAgfSwgJ2hvdmVyOmJnLWNvbW1lbnQtYnV0dG9uLWJsdWUtYmFja2dyb3VuZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGxvYWRQcmV2aWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgc2VsZWN0ZWRJbWFnZXMgPSBbXTtcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/js/inbox.js\n");

/***/ })

}]);